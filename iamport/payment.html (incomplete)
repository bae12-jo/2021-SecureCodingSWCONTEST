<!-- 사용자 관련 목록에서 정보 찾아서 넣어야함 -->
<!-- 결제 창 (KG 이니시스) 관련 html -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Payment</title>a
    <!-- jQuery -->
    <script type = "text/javascript" src = "https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <!-- iamport.payment.js -->
    <script type = "text/javascript" src = "https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
</head>
<body>
    <script>
    (function() {
        IMP.init("{INIpayTest}");
        var message;

        <!-- 결제창 호출 -->
        IMP.request_pay({
            pg: "html5_inicis",
            pay_method: "card",
            <!-- 구매하려는 물품의 주문번호 넣기 -->
            merchant_uid: "",
            name: "Deposit 결제",
            <!-- 사용자가 선택한 금액 넣기 -->
            amount: "",
            <!-- 사용자의 이메일, 이름, 번호, 주소 가져와서 넣기 (필요하지 않은 부분 빼기) -->
            buyer_email: "",
            buyer_name: "",
            buyer_tel: "",
            buyer_addr: "",
            buyer_postcode: ""

        }, function (rsp) {
            <!-- 결제 성공 시: 결제 승인에 성공한 경우 -->
            if (rsp.success) {
            <-- jQuery로 HTTP 요청 -->
                jQuery.ajax({
                    url: "https://www.myservice.com/payments/complete",
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    data: {
                        <!-- 결제번호, 주문번호 전달 -->
                        imp_uid: rsp.imp_uid,
                        merchant_uid: rsp.merchant_uid
                    }
                }).done(function (data) {
                <!-- 가맹점 서버에서 정상적으로 결제 정보 확인이 완료된 경우 -->
                    if(check.success)({
                        alert("결제가 완료되었습니다.");
                        alert("거래 번호 : " + rsp.merchant_uid);
                    })
                })
            } else {
                alert("결제에 실패하였습니다. 에러 발생 내용: " +  rsp.error_msg);
            }
        });
    }
  </script>
</body>
</html>
